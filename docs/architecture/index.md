# Local Video Recognition System Fullstack Architecture Document

## Table of Contents

- [Local Video Recognition System Fullstack Architecture Document](#table-of-contents)
  - [Starter Template or Existing Project](./starter-template-or-existing-project.md)
  - [Change Log](./change-log.md)
  - [Technical Summary](./technical-summary.md)
  - [Platform and Infrastructure Choice](./platform-and-infrastructure-choice.md)
  - [Repository Structure](./repository-structure.md)
  - [High Level Architecture Diagram](./high-level-architecture-diagram.md)
  - [Architectural Patterns](./architectural-patterns.md)
  - [Technology Stack Table](./technology-stack-table.md)
  - [Event](./event.md)
    - [Pydantic Schema](./event.md#pydantic-schema)
    - [Relationships](./event.md#relationships)
  - [DetectedObject](./detectedobject.md)
    - [Pydantic Schema](./detectedobject.md#pydantic-schema)
    - [Relationships](./detectedobject.md#relationships)
  - [SystemConfig](./systemconfig.md)
    - [Pydantic Schema](./systemconfig.md#pydantic-schema)
    - [Relationships](./systemconfig.md#relationships)
  - [MetricsSnapshot](./metricssnapshot.md)
    - [Pydantic Schema](./metricssnapshot.md#pydantic-schema)
    - [Relationships](./metricssnapshot.md#relationships)
  - [REST API Specification (Phase 2)](./rest-api-specification-phase-2.md)
  - [WebSocket Endpoint (Phase 2)](./websocket-endpoint-phase-2.md)
  - [RTSP Camera Client](./rtsp-camera-client.md)
  - [Motion Detector](./motion-detector.md)
  - [CoreML Object Detector](./coreml-object-detector.md)
  - [Ollama LLM Processor](./ollama-llm-processor.md)
  - [Event Manager](./event-manager.md)
  - [Database Manager](./database-manager.md)
  - [JSON Event Logger](./json-event-logger.md)
  - [Plaintext Event Logger](./plaintext-event-logger.md)
  - [Storage Monitor](./storage-monitor.md)
  - [Log Rotator](./log-rotator.md)
  - [Metrics Collector](./metrics-collector.md)
  - [Processing Pipeline](./processing-pipeline.md)
  - [FastAPI Server (Phase 2)](./fastapi-server-phase-2.md)
  - [WebSocket Server (Phase 2)](./websocket-server-phase-2.md)
  - [Web Dashboard (Phase 2)](./web-dashboard-phase-2.md)
  - [Ollama Local LLM Service](./ollama-local-llm-service.md)
  - [RTSP Camera Protocol](./rtsp-camera-protocol.md)
  - [1. Motion-Triggered Event Creation (Happy Path)](./1-motion-triggered-event-creation-happy-path.md)
  - [2. Event De-duplication (Suppression Logic)](./2-event-de-duplication-suppression-logic.md)
  - [3. Graceful Shutdown (SIGINT/SIGTERM Handling)](./3-graceful-shutdown-sigintsigterm-handling.md)
  - [4. Error Recovery (RTSP Reconnection)](./4-error-recovery-rtsp-reconnection.md)
  - [5. Phase 2 Real-Time Event Streaming (WebSocket)](./5-phase-2-real-time-event-streaming-websocket.md)
  - [Events Table (SQLite)](./events-table-sqlite.md)
  - [Schema Migration Strategy](./schema-migration-strategy.md)
  - [Common Query Patterns](./common-query-patterns.md)
  - [Future Tables (Phase 2/3)](./future-tables-phase-23.md)
  - [Component Architecture](./component-architecture.md)
    - [Component Organization](./component-architecture.md#component-organization)
    - [Component Template (Functional Pattern)](./component-architecture.md#component-template-functional-pattern)
  - [State Management Architecture](./state-management-architecture.md)
    - [State Structure (Custom Observer Pattern)](./state-management-architecture.md#state-structure-custom-observer-pattern)
    - [State Management Patterns](./state-management-architecture.md#state-management-patterns)
  - [Routing Architecture](./routing-architecture.md)
    - [Route Organization (Hash-based Routing)](./routing-architecture.md#route-organization-hash-based-routing)
    - [Navigation Example](./routing-architecture.md#navigation-example)
  - [Frontend Services Layer](./frontend-services-layer.md)
    - [API Client Setup](./frontend-services-layer.md#api-client-setup)
    - [Service Example (WebSocket Client)](./frontend-services-layer.md#service-example-websocket-client)
  - [Service Architecture (Traditional Server + Processing Engine)](./service-architecture-traditional-server-processing-engine.md)
    - [Dual-Process Architecture](./service-architecture-traditional-server-processing-engine.md#dual-process-architecture)
    - [Processing Pipeline Organization](./service-architecture-traditional-server-processing-engine.md#processing-pipeline-organization)
    - [FastAPI Server Structure](./service-architecture-traditional-server-processing-engine.md#fastapi-server-structure)
  - [Directory Explanations](./directory-explanations.md)
  - [File Naming Conventions](./file-naming-conventions.md)
  - [Import Path Examples](./import-path-examples.md)
  - [Gitignore Strategy](./gitignore-strategy.md)
  - [Environment Variables](./environment-variables.md)
  - [Project Metadata (pyproject.toml)](./project-metadata-pyprojecttoml.md)
  - [Rationale](./rationale.md)
  - [Local Development Setup](./local-development-setup.md)
    - [Prerequisites](./local-development-setup.md#prerequisites)
    - [Initial Setup](./local-development-setup.md#initial-setup)
    - [Development Commands](./local-development-setup.md#development-commands)
  - [Environment Configuration](./environment-configuration.md)
    - [Required Environment Variables](./environment-configuration.md#required-environment-variables)
  - [Deployment Strategy](./deployment-strategy.md)
  - [CI/CD Pipeline](./cicd-pipeline.md)
  - [Environments](./environments.md)
  - [Deployment Procedures](./deployment-procedures.md)
    - [Initial Production Setup](./deployment-procedures.md#initial-production-setup)
    - [launchd Service Configuration](./deployment-procedures.md#launchd-service-configuration)
    - [Updating Production Deployment](./deployment-procedures.md#updating-production-deployment)
    - [Rollback Procedure](./deployment-procedures.md#rollback-procedure)
    - [Monitoring Production](./deployment-procedures.md#monitoring-production)
  - [Security Requirements](./security-requirements.md)
    - [Frontend Security (Phase 2)](./security-requirements.md#frontend-security-phase-2)
    - [Backend Security](./security-requirements.md#backend-security)
    - [Authentication Security (Phase 2: None, Phase 3: Planned)](./security-requirements.md#authentication-security-phase-2-none-phase-3-planned)
    - [Additional Security Considerations](./security-requirements.md#additional-security-considerations)
  - [Performance Optimization](./performance-optimization.md)
    - [Frontend Performance (Phase 2)](./performance-optimization.md#frontend-performance-phase-2)
    - [Backend Performance](./performance-optimization.md#backend-performance)
    - [Performance Monitoring](./performance-optimization.md#performance-monitoring)
  - [Testing Pyramid](./testing-pyramid.md)
  - [Test Organization](./test-organization.md)
    - [Frontend Tests (Phase 2)](./test-organization.md#frontend-tests-phase-2)
    - [Backend Tests](./test-organization.md#backend-tests)
  - [Test Examples](./test-examples.md)
    - [Frontend Component Test (Phase 2)](./test-examples.md#frontend-component-test-phase-2)
    - [Backend API Test](./test-examples.md#backend-api-test)
    - [E2E Test (Phase 3)](./test-examples.md#e2e-test-phase-3)
  - [Unit Test Best Practices](./unit-test-best-practices.md)
  - [Integration Test Strategy](./integration-test-strategy.md)
  - [Performance Test Examples](./performance-test-examples.md)
  - [Test Coverage Requirements](./test-coverage-requirements.md)
  - [Testing CI/CD Integration](./testing-cicd-integration.md)
  - [Critical Fullstack Rules](./critical-fullstack-rules.md)
  - [Naming Conventions](./naming-conventions.md)
  - [Python Code Style](./python-code-style.md)
    - [PEP 8 Compliance](./python-code-style.md#pep-8-compliance)
  - [JavaScript Code Style](./javascript-code-style.md)
    - [ES6+ Standards](./javascript-code-style.md#es6-standards)
  - [Code Organization Patterns](./code-organization-patterns.md)
    - [Python Module Structure](./code-organization-patterns.md#python-module-structure)
    - [JavaScript Component Pattern](./code-organization-patterns.md#javascript-component-pattern)
  - [Error Handling Standards](./error-handling-standards.md)
    - [Python Error Handling](./error-handling-standards.md#python-error-handling)
    - [JavaScript Error Handling](./error-handling-standards.md#javascript-error-handling)
  - [Comments and Documentation](./comments-and-documentation.md)
    - [When to Comment](./comments-and-documentation.md#when-to-comment)
    - [TODO Comments](./comments-and-documentation.md#todo-comments)
  - [Git Commit Standards](./git-commit-standards.md)
    - [Commit Message Format](./git-commit-standards.md#commit-message-format)
  - [Linting and Formatting](./linting-and-formatting.md)
    - [Python Tools](./linting-and-formatting.md#python-tools)
    - [JavaScript Tools (Phase 2)](./linting-and-formatting.md#javascript-tools-phase-2)
  - [Error Flow](./error-flow.md)
    - [End-to-End Error Flow (Frontend → Backend → Frontend)](./error-flow.md#end-to-end-error-flow-frontend-backend-frontend)
  - [Error Response Format](./error-response-format.md)
    - [Standard API Error Response](./error-response-format.md#standard-api-error-response)
  - [Frontend Error Handling](./frontend-error-handling.md)
    - [API Client Error Handler](./frontend-error-handling.md#api-client-error-handler)
    - [UI Error Display Component](./frontend-error-handling.md#ui-error-display-component)
    - [Usage Example in Component](./frontend-error-handling.md#usage-example-in-component)
  - [Backend Error Handling](./backend-error-handling.md)
    - [FastAPI Error Handler](./backend-error-handling.md#fastapi-error-handler)
    - [Raising HTTP Exceptions in Endpoints](./backend-error-handling.md#raising-http-exceptions-in-endpoints)
    - [Custom Exception Raising in Business Logic](./backend-error-handling.md#custom-exception-raising-in-business-logic)
  - [Error Logging Standards](./error-logging-standards.md)
    - [Structured Logging with Context](./error-logging-standards.md#structured-logging-with-context)
    - [Log Levels](./error-logging-standards.md#log-levels)
  - [Monitoring Stack](./monitoring-stack.md)
  - [Key Metrics](./key-metrics.md)
    - [Frontend Metrics (Phase 2)](./key-metrics.md#frontend-metrics-phase-2)
    - [Backend Metrics](./key-metrics.md#backend-metrics)
  - [Metrics Analysis](./metrics-analysis.md)
    - [Analyzing Metrics with Command-Line Tools](./metrics-analysis.md#analyzing-metrics-with-command-line-tools)
    - [Python Analysis Script](./metrics-analysis.md#python-analysis-script)
  - [Dashboard Visualization (Phase 3)](./dashboard-visualization-phase-3.md)
  - [Checklist Results Report](./checklist-results-report.md)
    - [Executive Summary](./checklist-results-report.md#executive-summary)
    - [Category Analysis](./checklist-results-report.md#category-analysis)
    - [Detailed Analysis by Category](./checklist-results-report.md#detailed-analysis-by-category)
      - [1. High-Level Architecture ✓ PASS (97%)](./checklist-results-report.md#1-high-level-architecture-pass-97)
      - [2. Technology Stack Specification ✓ PASS (98%)](./checklist-results-report.md#2-technology-stack-specification-pass-98)
      - [3. Data Models & Schema Design ✓ PASS (100%)](./checklist-results-report.md#3-data-models-schema-design-pass-100)
      - [4. API Specification ✓ PASS (96%)](./checklist-results-report.md#4-api-specification-pass-96)
      - [5. Component Architecture ✓ PASS (98%)](./checklist-results-report.md#5-component-architecture-pass-98)
      - [6. External System Integration ✓ PASS (100%)](./checklist-results-report.md#6-external-system-integration-pass-100)
      - [7. Core Workflows & Sequences ✓ PASS (95%)](./checklist-results-report.md#7-core-workflows-sequences-pass-95)
      - [8. Database Design ✓ PASS (97%)](./checklist-results-report.md#8-database-design-pass-97)
      - [9. Frontend Architecture ✓ PASS (94%)](./checklist-results-report.md#9-frontend-architecture-pass-94)
      - [10. Backend Architecture ✓ PASS (98%)](./checklist-results-report.md#10-backend-architecture-pass-98)
      - [11. Project Structure ✓ PASS (100%)](./checklist-results-report.md#11-project-structure-pass-100)
      - [12. Development Workflow ✓ PASS (96%)](./checklist-results-report.md#12-development-workflow-pass-96)
      - [13. Deployment Architecture ✓ PASS (97%)](./checklist-results-report.md#13-deployment-architecture-pass-97)
      - [14. Security & Performance ✓ PASS (95%)](./checklist-results-report.md#14-security-performance-pass-95)
      - [15. Testing Strategy ✓ PASS (98%)](./checklist-results-report.md#15-testing-strategy-pass-98)
      - [16. Coding Standards ✓ PASS (100%)](./checklist-results-report.md#16-coding-standards-pass-100)
      - [17. Error Handling ✓ PASS (98%)](./checklist-results-report.md#17-error-handling-pass-98)
      - [18. Monitoring & Observability ✓ PASS (96%)](./checklist-results-report.md#18-monitoring-observability-pass-96)
    - [Top Issues by Priority](./checklist-results-report.md#top-issues-by-priority)
      - [BLOCKERS](./checklist-results-report.md#blockers)
      - [HIGH PRIORITY (Should Address During Implementation)](./checklist-results-report.md#high-priority-should-address-during-implementation)
      - [MEDIUM PRIORITY (Would Improve Clarity)](./checklist-results-report.md#medium-priority-would-improve-clarity)
      - [LOW PRIORITY (Nice to Have)](./checklist-results-report.md#low-priority-nice-to-have)
    - [Implementation Readiness Assessment](./checklist-results-report.md#implementation-readiness-assessment)
    - [Recommendations](./checklist-results-report.md#recommendations)
      - [For AI Development Agent (Before Starting Story 1.1)](./checklist-results-report.md#for-ai-development-agent-before-starting-story-11)
      - [For Implementation Phase](./checklist-results-report.md#for-implementation-phase)
      - [For Testing Phase](./checklist-results-report.md#for-testing-phase)
      - [For Deployment Phase](./checklist-results-report.md#for-deployment-phase)
    - [Final Decision](./checklist-results-report.md#final-decision)
